class Resume(object):
  def __init__(self,request):
     self.settings = request.registry.settings
     self.collection = request.db['resume']
     self.collection_school=request.db['school']
     self.collection_college=request.db['graduate']
     self.collection_project=request.db['project']

  def resumeread(self,uname):
    res=self.collection.find_one({'username':uname})
    #print res
    #check_address=Resume.get('address',None)
    try:
        Address=res['address']
    except TypeError:
        Address='Enter your address'
    except KeyError:
        Address='Enter your address'
    schools=[]
    colleges=[]
    name=[]
    d_o_j=[]
    d_o_l=[]
    place=[]
    m_s=[]
    o_f=[]
    no_of_p=0  #school_p_tag
    try:
        schools=res['school']
    except TypeError:
        schools=[]
    i=0
    for school in schools:
        school_detail=self.collection_school.find_one({'sid':school})
        name.append(school_detail['name'])
        d_o_j.append(school_detail['date_of_joining'])
        d_o_l.append(school_detail['date_of_leaving'])
        place.append(school_detail['place'])
        m_s.append(school_detail['marks_secured'])
        o_f.append(school_detail['out_of'])
        i=i+1
    no_of_p=i;
    degree=[]
    course=[]
    name_coll=[]
    place_coll=[]
    d_o_j_coll=[]
    d_o_l_coll=[]
    project_ids=[]
    m_s_coll=[]
    o_f_coll=[]
    no_of_pc=0  #college_p_tag
    try:
        colleges=res['college']
    except KeyError:
        colleges=[]
    except TypeError:
        colleges=[]
    i=0
    for college in colleges:
        college_detail=self.collection_college.find_one({'gid':college})
        degree.append(college_detail['degree'])
        course.append(college_detail['course'])
        name_coll.append(college_detail['name'])
        place_coll.append(college_detail['place'])
        d_o_j_coll.append(college_detail['date_of_joining'])
        d_o_l_coll.append(college_detail['date_of_leaving'])
        m_s_coll.append(college_detail['markssecured'])
        o_f_coll.append(college_detail['out_of'])
        i=i+1
    no_of_pc=i
    return {'address':Address,'username':uname,'no_of_p':no_of_p,'name':name,'d_o_j':d_o_j,'d_o_l':d_o_l,'place':place,'m_s':m_s,'o_f':o_f,
    'no_of_pc':no_of_pc,'degree':degree,'course':course,'name_coll':name_coll,'place_coll':place_coll,'d_o_j_coll':d_o_j_coll,'d_o_l_coll':d_o_l_coll,
    'm_s_coll':m_s_coll,'o_f_coll':o_f_coll}
